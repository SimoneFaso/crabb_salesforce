<!--
 - Created by MatteoSala on 26/06/2020.
 -->

<!-- Crabb Messagge Viewer -->
<template>
    <div class="slds-grid slds-gutters slds-grid_align-space">
        <div class="slds-col slds-size_3-of-3 slds-card_boundary">
            <lightning-card title={label.lMsgViewr} icon-name="standard:messaging_user">
                <div style="text-align: center;font-size: 16px;">
                    <template if:false={isMsg}>
                        <div>{label.lMsgViewrNA}<BR/><BR/></div>
                    </template>
                    <template if:true={isMsg}>
                        <div>{label.lMsgViewrList}<BR/><BR/></div>
                        <template for:each={lMsg} for:item="m">
                            <template if:true={m.iserror}>
                                <p key={m.key}>m.error</p>
                            </template>
                            <template if:false={m.iserror}>
                                <div key={m.key} class="slds-box">
                                    <h2 class="header">{m.type}</h2>
                                    <p>
                                        <lightning-formatted-date-time value={m.send_dt} year="numeric" month="numeric" day="numeric" hour="2-digit"
                                                                       minute="2-digit" time-zone-name="short" hour12="true"></lightning-formatted-date-time>
                                    </p>
                                    <template if:false={m.isSms}>
                                        <p>
                                            {m.email}
                                        </p>
                                    </template>
                                    <template if:true={m.isSms}>
                                        <p>
                                            {m.phone}
                                        </p>
                                    </template>
                                    <p class="slds-p-top_xx-large">
                                        <lightning-formatted-rich-text value={m.body}></lightning-formatted-rich-text>
                                    </p>
                                </div>
                            </template>
                        </template>
                    </template>
                </div>
            </lightning-card>
        </div>
    </div>
</template>